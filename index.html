<html>
  <head>
    <meta charset="utf-8" />
    <title>Hertz VR Training</title>
    <meta name="description" content="WebVR - Aframe - VR training at Hertz" />
    <meta name="author" content="Colin Sharkey - UX Designer & Developer" />
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@5/dist/aframe-event-set-component.min.js"></script>
    <script src="https://unpkg.com/aframe-layout-component@5.3.0/dist/aframe-layout-component.min.js"></script>
    <script src="https://unpkg.com/aframe-template-component@3.2.1/dist/aframe-template-component.min.js"></script>
    <script src="https://unpkg.com/aframe-proxy-event-component@2.1.0/dist/aframe-proxy-event-component.min.js"></script>
    <!-- UI buttons / container -->
    <script src="https://rawgit.com/rdub80/aframe-gui/master/dist/aframe-gui.min.js"></script>

    <script>
      AFRAME.registerComponent("hotspots", {
        init: function () {
          this.el.addEventListener("reloadspots", function (evt) {
            //get the entire current spot group and scale it to 0
            var currspotgroup = document.getElementById(evt.detail.currspots);
            currspotgroup.setAttribute("scale", "0 0 0");

            //get the entire new spot group and scale it to 1
            var newspotgroup = document.getElementById(evt.detail.newspots);
            newspotgroup.setAttribute("scale", "1 1 1");
          });
        },
      });
      AFRAME.registerComponent("spot", {
        schema: {
          linkto: { type: "string", default: "" },
          nextaudio: { type: "string", default: "" },
          spotgroup: { type: "string", default: "" },
          imagerotation: { type: "string", default: "0 280 0" },
        },
        init: function () {
          var data = this.data;

          this.el.addEventListener("click", function () {
            //set the skybox source to the new image as per the spot
            var sky = document.getElementById("skybox");
            sky.setAttribute("src", data.linkto);
            sky.setAttribute("rotation", data.imagerotation);

            //set the voice over audio source to the new audio as per the spot
            var audio = document.getElementById("audio");
            audio.setAttribute(
              "sound",
              `src: #${data.nextaudio}; autoplay: true; loop: false`
            );
            console.log("data: ", data);
            console.log("audio: ", audio);

            var spotcomp = document.getElementById("spots");
            var currspots = this.parentElement.getAttribute("id");
            //create event for spots component to change the spots data
            spotcomp.emit("reloadspots", {
              newspots: data.spotgroup,
              currspots: currspots,
            });
          });
        },
      });
    </script>
  </head>
  <body>
    <a-scene background="color:#ECECEC">
      <a-assets>
        <!-- Mock assets -->
        <audio
          id="click-sound"
          crossorigin="anonymous"
          src="https://cdn.aframe.io/360-image-gallery-boilerplate/audio/click.ogg"
        ></audio>
        <!-- Audio -->
        <audio
          id="sound1"
          src="assets/audio/VO/VO1-welcome.wav"
          preload="auto"
        ></audio>

        <audio
          id="sound2"
          src="assets/audio/VO/VO2-changes.wav"
          preload="auto"
        ></audio>

        <audio
          id="sound3"
          src="assets/audio/VO/VO3-handsan.wav"
          preload="auto"
        ></audio>

        <audio
          id="sound4"
          src="assets/audio/VO/VO4-stairs.wav"
          preload="auto"
        ></audio>

        <audio
          id="sound5"
          src="assets/audio/VO/VO5-canteen.wav"
          preload="auto"
        ></audio>

        <audio
          id="sound6"
          src="assets/audio/VO/VO6-tables.wav"
          preload="auto"
        ></audio>

        <audio
          id="sound7"
          src="assets/audio/VO/VO7-social.wav"
          preload="auto"
        ></audio>

        <audio
          id="sound8"
          src="assets/audio/VO/VO8-cleaning.wav"
          preload="auto"
        ></audio>

        <audio
          id="sound9"
          src="assets/audio/VO/VO9-updates.wav"
          preload="auto"
        ></audio>

        <!-- 360 images -->
        <img
          id="point1"
          src="assets/images/360/1-splash.jpg"
          preload="auto"
          rotation="0 64 0"
        />
        <img id="point2" src="assets/images/360/2-welcome.jpg" preload="auto" />
        <img id="point3" src="assets/images/360/3-changes.jpg" preload="auto" />
        <img id="point4" src="assets/images/360/4-hand.jpg" preload="auto" />
        <img id="point5" src="assets/images/360/5-stairs.jpg" preload="auto" />
        <img id="point6" src="assets/images/360/6-canteen.jpg" preload="auto" />
        <img id="point7" src="assets/images/360/7-tables.jpg" preload="auto" />
        <img id="point8" src="assets/images/360/8-social.jpg" preload="auto" />
        <img
          id="point9"
          src="assets/images/360/9-cleaning.jpg"
          preload="auto"
        />
        <img
          id="point10"
          src="assets/images/360/10-updates.jpg"
          preload="auto"
        />
        <img id="point11" src="assets/images/360/1-splash.jpg" preload="auto" />

        <img id="next" src="assets/images/icons/next.svg" />
        <img id="back" src="assets/images/icons/back.svg" />
        <img id="start" src="assets/images/icons/start.svg" />
      </a-assets>

      <!-- 
      ------------------------------------  
        Start Scene 
      ------------------------------------      
      -->

      <!-- Button Wrapper -->
      <a-gui-flex-container
        id="spots"
        hotspots
        flex-direction="row"
        justify-content="center"
        align-items="normal"
        component-padding="0"
        opacity="0.6"
        width="12"
        height="1.2"
        panel-color="#000"
        panel-rounded="0.2"
        position="0 2.5 -6"
        rotation="0 0 0"
      >
        <!-- First screen - Start -->
        <a-gui-flex-container id="group-point1">
          <a-gui-button
            width="2.5"
            height="0.7"
            base-depth="0.025"
            depth="0.1"
            gap="0.1"
            onclick="buttonActionFunction"
            key-code="32"
            value="Start"
            font-family="assets/fonts/Ride-Bold.otf"
            font-size="0.25"
            margin="0 0 0.05 0"
            font-color="black"
            active-color="#D6B000"
            hover-color="#FFDF4D"
            border-color="#000"
            focus-color="#000"
            background-color="#FFD100"
            spot="linkto:#point2;spotgroup:group-point2;nextaudio:sound1;imagerotation:0 280 0"
          >
          </a-gui-button>
        </a-gui-flex-container>

        <!-- Scene 1 -->
        <a-gui-flex-container id="group-point2" scale="0 0 0">
          <a-gui-button
            width="2.5"
            height="0.7"
            base-depth="0.025"
            depth="0.1"
            gap="0.1"
            onclick="buttonActionFunction"
            key-code="32"
            value="Next"
            font-family="assets/fonts/Ride-Bold.otf"
            font-size="0.25"
            margin="0 0 0.05 0"
            font-color="black"
            active-color="#D6B000"
            hover-color="#FFDF4D"
            border-color="#000"
            focus-color="#000"
            background-color="#FFD100"
            spot="linkto:#point3;spotgroup:group-point3;nextaudio:sound2;imagerotation:0 280 0"
          >
          </a-gui-button>
        </a-gui-flex-container>
        <!-- End Scene 1 -->

        <!-- Scene 2 -->
        <a-gui-flex-container id="group-point3" scale="0 0 0">
          <a-gui-button
            width="2.5"
            height="0.7"
            base-depth="0.025"
            depth="0.1"
            gap="0.1"
            onclick="buttonActionFunction"
            key-code="32"
            value="Back"
            font-family="assets/fonts/Ride-Bold.otf"
            font-size="0.25"
            margin="0 0 0.05 0"
            font-color="black"
            active-color="#D6B000"
            hover-color="#FFDF4D"
            border-color="#000"
            focus-color="#000"
            background-color="#FFD100"
            spot="linkto:#point2;spotgroup:group-point2;nextaudio:sound1;imagerotation:0 280 0"
          >
          </a-gui-button>
          <a-gui-button
            width="2.5"
            height="0.7"
            base-depth="0.025"
            depth="0.1"
            gap="0.1"
            onclick="buttonActionFunction"
            key-code="32"
            value="Next"
            font-family="assets/fonts/Ride-Bold.otf"
            font-size="0.25"
            margin="0 0 0.05 0"
            font-color="black"
            active-color="#D6B000"
            hover-color="#FFDF4D"
            border-color="#000"
            focus-color="#000"
            background-color="#FFD100"
            spot="linkto:#point4;spotgroup:group-point4;nextaudio:sound3;imagerotation:0 280 0"
          >
          </a-gui-button>
        </a-gui-flex-container>
        <!-- End Scene 2 -->

        <!-- Scene 3 -->
        <a-gui-flex-container id="group-point4" scale="0 0 0">
          <a-gui-button
            width="2.5"
            height="0.7"
            base-depth="0.025"
            depth="0.1"
            gap="0.1"
            onclick="buttonActionFunction"
            key-code="32"
            value="Back"
            font-family="assets/fonts/Ride-Bold.otf"
            font-size="0.25"
            margin="0 0 0.05 0"
            font-color="black"
            active-color="#D6B000"
            hover-color="#FFDF4D"
            border-color="#000"
            focus-color="#000"
            background-color="#FFD100"
            spot="linkto:#point3;spotgroup:group-point3;nextaudio:sound2;imagerotation:0 280 0"
          >
          </a-gui-button>
          <a-gui-button
            width="2.5"
            height="0.7"
            base-depth="0.025"
            depth="0.1"
            gap="0.1"
            onclick="buttonActionFunction"
            key-code="32"
            value="Next"
            font-family="assets/fonts/Ride-Bold.otf"
            font-size="0.25"
            margin="0 0 0.05 0"
            font-color="black"
            active-color="#D6B000"
            hover-color="#FFDF4D"
            border-color="#000"
            focus-color="#000"
            background-color="#FFD100"
            spot="linkto:#point5;spotgroup:group-point5;nextaudio:sound4;imagerotation:0 280 0"
          >
          </a-gui-button>
        </a-gui-flex-container>
        <!-- End Scene 3 -->

        <!-- Scene 4 -->
        <a-gui-flex-container id="group-point5" scale="0 0 0">
          <a-gui-button
            width="2.5"
            height="0.7"
            base-depth="0.025"
            depth="0.1"
            gap="0.1"
            onclick="buttonActionFunction"
            key-code="32"
            value="Back"
            font-family="assets/fonts/Ride-Bold.otf"
            font-size="0.25"
            margin="0 0 0.05 0"
            font-color="black"
            active-color="#D6B000"
            hover-color="#FFDF4D"
            border-color="#000"
            focus-color="#000"
            background-color="#FFD100"
            spot="linkto:#point4;spotgroup:group-point4;nextaudio:sound3;imagerotation:0 280 0"
          >
          </a-gui-button>
          <a-gui-button
            width="2.5"
            height="0.7"
            base-depth="0.025"
            depth="0.1"
            gap="0.1"
            onclick="buttonActionFunction"
            key-code="32"
            value="Next"
            font-family="assets/fonts/Ride-Bold.otf"
            font-size="0.25"
            margin="0 0 0.05 0"
            font-color="black"
            active-color="#D6B000"
            hover-color="#FFDF4D"
            border-color="#000"
            focus-color="#000"
            background-color="#FFD100"
            spot="linkto:#point6;spotgroup:group-point6;nextaudio:sound5;imagerotation:0 280 0"
          >
          </a-gui-button>
        </a-gui-flex-container>
        <!-- End Scene 4 -->

        <!-- Scene 5 -->
        <a-gui-flex-container id="group-point6" scale="0 0 0">
          <a-gui-button
            width="2.5"
            height="0.7"
            base-depth="0.025"
            depth="0.1"
            gap="0.1"
            onclick="buttonActionFunction"
            key-code="32"
            value="Back"
            font-family="assets/fonts/Ride-Bold.otf"
            font-size="0.25"
            margin="0 0 0.05 0"
            font-color="black"
            active-color="#D6B000"
            hover-color="#FFDF4D"
            border-color="#000"
            focus-color="#000"
            background-color="#FFD100"
            spot="linkto:#point5;spotgroup:group-point5;nextaudio:sound4;imagerotation:0 280 0"
          >
          </a-gui-button>
          <a-gui-button
            width="2.5"
            height="0.7"
            base-depth="0.025"
            depth="0.1"
            gap="0.1"
            onclick="buttonActionFunction"
            key-code="32"
            value="Next"
            font-family="assets/fonts/Ride-Bold.otf"
            font-size="0.25"
            margin="0 0 0.05 0"
            font-color="black"
            active-color="#D6B000"
            hover-color="#FFDF4D"
            border-color="#000"
            focus-color="#000"
            background-color="#FFD100"
            spot="linkto:#point7;spotgroup:group-point7;nextaudio:sound6;imagerotation:0 280 0"
          >
          </a-gui-button>
        </a-gui-flex-container>
        <!-- End Scene 5 -->

        <!-- Scene 6 -->
        <a-gui-flex-container id="group-point7" scale="0 0 0">
          <a-gui-button
            width="2.5"
            height="0.7"
            base-depth="0.025"
            depth="0.1"
            gap="0.1"
            onclick="buttonActionFunction"
            key-code="32"
            value="Back"
            font-family="assets/fonts/Ride-Bold.otf"
            font-size="0.25"
            margin="0 0 0.05 0"
            font-color="black"
            active-color="#D6B000"
            hover-color="#FFDF4D"
            border-color="#000"
            focus-color="#000"
            background-color="#FFD100"
            spot="linkto:#point6;spotgroup:group-point6;nextaudio:sound5;imagerotation:0 280 0"
          >
          </a-gui-button>
          <a-gui-button
            width="2.5"
            height="0.7"
            base-depth="0.025"
            depth="0.1"
            gap="0.1"
            onclick="buttonActionFunction"
            key-code="32"
            value="Next"
            font-family="assets/fonts/Ride-Bold.otf"
            font-size="0.25"
            margin="0 0 0.05 0"
            font-color="black"
            active-color="#D6B000"
            hover-color="#FFDF4D"
            border-color="#000"
            focus-color="#000"
            background-color="#FFD100"
            spot="linkto:#point8;spotgroup:group-point8;nextaudio:sound7;imagerotation:0 280 0"
          >
          </a-gui-button>
        </a-gui-flex-container>
        <!-- End Scene 6 -->

        <!-- Scene 7 -->
        <a-gui-flex-container id="group-point8" scale="0 0 0">
          <a-gui-button
            width="2.5"
            height="0.7"
            base-depth="0.025"
            depth="0.1"
            gap="0.1"
            onclick="buttonActionFunction"
            key-code="32"
            value="Back"
            font-family="assets/fonts/Ride-Bold.otf"
            font-size="0.25"
            margin="0 0 0.05 0"
            font-color="black"
            active-color="#D6B000"
            hover-color="#FFDF4D"
            border-color="#000"
            focus-color="#000"
            background-color="#FFD100"
            spot="linkto:#point7;spotgroup:group-point7;nextaudio:sound6;imagerotation:0 280 0"
          >
          </a-gui-button>
          <a-gui-button
            width="2.5"
            height="0.7"
            base-depth="0.025"
            depth="0.1"
            gap="0.1"
            onclick="buttonActionFunction"
            key-code="32"
            value="Next"
            font-family="assets/fonts/Ride-Bold.otf"
            font-size="0.25"
            margin="0 0 0.05 0"
            font-color="black"
            active-color="#D6B000"
            hover-color="#FFDF4D"
            border-color="#000"
            focus-color="#000"
            background-color="#FFD100"
            spot="linkto:#point9;spotgroup:group-point9;nextaudio:sound8;imagerotation:0 280 0"
          >
          </a-gui-button>
        </a-gui-flex-container>
        <!-- End Scene 7 -->

        <!-- Scene 8 -->
        <a-gui-flex-container id="group-point9" scale="0 0 0">
          <a-gui-button
            width="2.5"
            height="0.7"
            base-depth="0.025"
            depth="0.1"
            gap="0.1"
            onclick="buttonActionFunction"
            key-code="32"
            value="Back"
            font-family="assets/fonts/Ride-Bold.otf"
            font-size="0.25"
            margin="0 0 0.05 0"
            font-color="black"
            active-color="#D6B000"
            hover-color="#FFDF4D"
            border-color="#000"
            focus-color="#000"
            background-color="#FFD100"
            spot="linkto:#point8;spotgroup:group-point8;nextaudio:sound7;imagerotation:0 280 0"
          >
          </a-gui-button>
          <a-gui-button
            width="2.5"
            height="0.7"
            base-depth="0.025"
            depth="0.1"
            gap="0.1"
            onclick="buttonActionFunction"
            key-code="32"
            value="Next"
            font-family="assets/fonts/Ride-Bold.otf"
            font-size="0.25"
            margin="0 0 0.05 0"
            font-color="black"
            active-color="#D6B000"
            hover-color="#FFDF4D"
            border-color="#000"
            focus-color="#000"
            background-color="#FFD100"
            spot="linkto:#point10;spotgroup:group-point10;nextaudio:sound9;imagerotation:0 280 0"
          >
          </a-gui-button>
        </a-gui-flex-container>
        <!-- End Scene 8 -->

        <!-- Scene 9 -->
        <a-gui-flex-container id="group-point10" scale="0 0 0">
          <a-gui-button
            width="2.5"
            height="0.7"
            base-depth="0.025"
            depth="0.1"
            gap="0.1"
            onclick="buttonActionFunction"
            key-code="32"
            value="Back"
            font-family="assets/fonts/Ride-Bold.otf"
            font-size="0.25"
            margin="0 0 0.05 0"
            font-color="black"
            active-color="#D6B000"
            hover-color="#FFDF4D"
            border-color="#000"
            focus-color="#000"
            background-color="#FFD100"
            spot="linkto:#point9;spotgroup:group-point9;nextaudio:sound8;imagerotation:0 280 0"
          >
          </a-gui-button>
          <a-gui-button
            width="2.5"
            height="0.7"
            base-depth="0.025"
            depth="0.1"
            gap="0.1"
            onclick="buttonActionFunction"
            key-code="32"
            value="Next"
            font-family="assets/fonts/Ride-Bold.otf"
            font-size="0.25"
            margin="0 0 0.05 0"
            font-color="black"
            active-color="#D6B000"
            hover-color="#FFDF4D"
            border-color="#000"
            focus-color="#000"
            background-color="#FFD100"
            spot="linkto:#point1;spotgroup:group-point11;nextaudio:;imagerotation:0 280 0"
          >
          </a-gui-button>
        </a-gui-flex-container>
        <!-- End Scene 9 -->

        <!-- Finished Screen -->
        <a-gui-flex-container id="group-point11" scale="0 0 0">
          <a-gui-button
            width="2.5"
            height="0.7"
            base-depth="0.025"
            depth="0.1"
            gap="0.1"
            onclick="buttonActionFunction"
            key-code="32"
            value="Back"
            font-family="assets/fonts/Ride-Bold.otf"
            font-size="0.25"
            margin="0 0 0.05 0"
            font-color="black"
            active-color="#D6B000"
            hover-color="#FFDF4D"
            border-color="#000"
            focus-color="#000"
            background-color="#FFD100"
            spot="linkto:#point10;spotgroup:group-point10;nextaudio:sound9;imagerotation:0 280 0"
          >
          </a-gui-button>
        </a-gui-flex-container>
        <!-- End Scene 10 -->

        <!-- End Button Wrapper -->
      </a-gui-flex-container>

      <!-- 360 image -->
      <a-sky
        id="skybox"
        position="0.82068 0 -3.67258"
        src="#point1"
        rotation="0 280 0"
      ></a-sky>

      <!-- Voice over audio -->
      <a-entity
        id="audio"
        visible="false"
        geometry="primitive: plane"
        material="color: #ffffff"
        position="0.68894 0 -0.4605"
        sound=""
      ></a-entity>

      <!-- <a-entity id="cam" camera position="0 1.6 0" look-controls>
        <a-entity
          cursor="fuse:true;fuseTimeout:1500"
          geometry="primitive:ring;radiusInner:0.02;radiusOuter:0.03"
          position="0 0 -1.8"
          material="shader:flat;color:green"
          animation__click="property: scale; startEvents: click; easing: easeInCubic; dur: 150; from: 0.1 0.1 0.1; to: 1 1 1"
          animation__fusing="property: scale; startEvents: fusing; easing: easeInCubic; dur: 1500; from: 1 1 1; to: 0.1 0.1 0.1"
          animation__mouseenter="property: scale; startEvents: mouseleave; easing: easeInCubic; dur: 500; to: 1 1 1; loop:1"
        >
        </a-entity>
      </a-entity> -->

      <!-- Camera + cursor. -->
      <a-entity id="cameraRig" position="0 1.6 0">
        <a-camera look-controls position="0 0 0">
          <a-gui-cursor
            id="cursor"
            raycaster="objects: [gui-interactable]"
            fuse="true"
            fuse-timeout="2000"
            color="#ECEFF1"
            hover-color="#CFD8DC"
            active-color="#607D8B"
            design="ring"
          >
            <!-- dot, ring, reticle, cross  -->
          </a-gui-cursor>
          <!-- /cursor -->
        </a-camera>
        <!-- /camera -->
      </a-entity>
    </a-scene>
  </body>
</html>
